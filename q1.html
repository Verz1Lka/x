<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Navigator properties test</title>
</head>
<body>
<h1>Navigator properties test</h1>
<div id="results"></div>

<script>
    // --- Шаг 1: Собираем свойства в основном документе ---
    const props1 = Object.getOwnPropertyNames(
        Object.getPrototypeOf(navigator)
    );

    // --- Шаг 2: iframe (вместо frame) для сбора свойств ---
    const frame = document.createElement("frame");
    document.body.appendChild(frame);

    const frameNavigator = frame.contentWindow.navigator;
    document.body.removeChild(frame);

    // Получаем свойства navigator из iframe
    const props2 =  Object.getOwnPropertyNames(frameNavigator.__proto__)

    const sandboxedFrame = document.createElement("iframe");
    sandboxedFrame.setAttribute("sandbox", "allow-same-origin");

    document.body.appendChild(sandboxedFrame);

    let props3;
    try {
        // В песочном iframe часто будут ограничения
        props3 = Object.getOwnPropertyNames(frameNavigator.__proto__)
    } catch (err) {
        // Если вдруг доступ запрещён
        props3 = ["Error: " + err.message];
    }

    document.body.removeChild(sandboxedFrame);

    // --- Выводим результаты ---
    const results = document.getElementById("results");
    results.innerHTML = `
      <h2>1) Main page navigator</h2>
      <p>Count: <b>${props1.length}</b></p>
      <pre>${JSON.stringify(props1, null, 2)}</pre>

      <h2>2) Iframe navigator</h2>
      <p>Count: <b>${props2.length}</b></p>
      <pre>${JSON.stringify(props2, null, 2)}</pre>

      <h2>3) Sandboxed iframe navigator</h2>
      <p>Count: <b>${props3.length}</b></p>
      <pre>${JSON.stringify(props3, null, 2)}</pre>
    `;
</script>
</body>
</html>